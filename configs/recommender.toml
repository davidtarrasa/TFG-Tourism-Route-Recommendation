# Recommender configuration (single source of truth for training/scoring params).
#
# Notes:
# - Keep CLI flags minimal; prefer changing values here and re-training.
# - Weights order: [content, item, markov, embed, als]

[embeddings]
# Word2Vec (gensim) over sequences of visited POIs.
# Note: "more potent" != "bigger". These defaults aim for stronger generalization
# (skip-gram + more epochs + stronger negative sampling).
vector_size = 300
window = 15
min_count = 1
workers = 4
epochs = 40
negative = 15
sample = 1e-5
ns_exponent = 0.75
hs = 0
seed = 42

# How many neighbors per seed POI are used to build recommendation scores.
topn_score = 2000

[als]
factors = 256
regularization = 0.005
iterations = 60
alpha = 60.0
topn_score = 500

[hybrid]
user_current = [0.10, 0.15, 0.15, 0.05, 0.55]
user_only    = [0.10, 0.20, 0.10, 0.05, 0.55]
current_only = [0.10, 0.15, 0.35, 0.05, 0.35]
embed_or_als  = [0.15, 0.15, 0.10, 0.15, 0.45]
cold_start   = [0.60, 0.20, 0.20, 0.00, 0.00]

[filters]
exclude_categories = ["Intersection", "State", "Home (private)"]

[prefs]
# Score boost applied when a candidate matches one of the preferred categories.
category_boost = 0.20

[eval]
# Settings used ONLY when running `python -m src.recommender.eval.evaluate --fair`
# to keep fair evaluation under a few minutes.
als_factors = 64
als_regularization = 0.01
als_iterations = 20
als_alpha = 40.0

emb_vector_size = 128
emb_window = 10
emb_epochs = 10
emb_negative = 10
